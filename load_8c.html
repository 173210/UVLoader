<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UVLoader: /Users/yifanlu/Development/C/UVLoader/load.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">UVLoader
   </div>
   <div id="projectbrief">Userland Vita Loader</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9e51036813d6151dfecc72d5fa7c02b3.html">Users</a></li><li class="navelem"><a class="el" href="dir_c042ca278f2ea374ba054684e770f304.html">yifanlu</a></li><li class="navelem"><a class="el" href="dir_78ec8ec77c35bdc0ab00f51de46d5750.html">Development</a></li><li class="navelem"><a class="el" href="dir_a95aae8b26ce45214022f27333004b20.html">C</a></li><li class="navelem"><a class="el" href="dir_55119fd1789b6c1ea252d1e95b3c9f98.html">UVLoader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">load.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="load_8h_source.html">load.h</a>&quot;</code><br/>
<code>#include &quot;resolve.h&quot;</code><br/>
<code>#include &quot;scefuncs.h&quot;</code><br/>
<code>#include &quot;utils.h&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af42fa9af8c0050f5f2998dcec67f219c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="load_8c.html#af42fa9af8c0050f5f2998dcec67f219c">uvl_load_exe</a> (const char *filename, void **entry)</td></tr>
<tr class="memdesc:af42fa9af8c0050f5f2998dcec67f219c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads an supported executable This function identifies and loads a executable at the given file. Currently supports ELF and SCE executable.  <a href="#af42fa9af8c0050f5f2998dcec67f219c"></a><br/></td></tr>
<tr class="separator:af42fa9af8c0050f5f2998dcec67f219c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2984987adfb0eba822616e72620a6dfa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="load_8c.html#a2984987adfb0eba822616e72620a6dfa">uvl_load_elf</a> (SceUID fd, SceOff start_offset, void **entry)</td></tr>
<tr class="memdesc:a2984987adfb0eba822616e72620a6dfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads an ELF file Performs both loading and resolving NIDs.  <a href="#a2984987adfb0eba822616e72620a6dfa"></a><br/></td></tr>
<tr class="separator:a2984987adfb0eba822616e72620a6dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa62679dbbd82a847b188f76745e49f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="load_8c.html#adfa62679dbbd82a847b188f76745e49f">uvl_load_module</a> (char *name)</td></tr>
<tr class="memdesc:adfa62679dbbd82a847b188f76745e49f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a system module by name.  <a href="#adfa62679dbbd82a847b188f76745e49f"></a><br/></td></tr>
<tr class="separator:adfa62679dbbd82a847b188f76745e49f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addf0f835f4f422e854fa4c6eb7e657c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="load_8c.html#addf0f835f4f422e854fa4c6eb7e657c3">uvl_check_elf_header</a> (<a class="el" href="struct_elf32___ehdr.html">Elf32_Ehdr_t</a> *hdr)</td></tr>
<tr class="memdesc:addf0f835f4f422e854fa4c6eb7e657c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates ELF header Makes sure the ELF is recognized by the Vita's architecture.  <a href="#addf0f835f4f422e854fa4c6eb7e657c3"></a><br/></td></tr>
<tr class="separator:addf0f835f4f422e854fa4c6eb7e657c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd49aca44342a5cfe34d9cf62c20f3c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="load_8c.html#afd49aca44342a5cfe34d9cf62c20f3c0">uvl_get_module_info</a> (SceUID fd, SceOff start_offset, <a class="el" href="struct_elf32___ehdr.html">Elf32_Ehdr_t</a> *elf_hdr, <a class="el" href="structmodule__info.html">module_info_t</a> *mod_info)</td></tr>
<tr class="memdesc:afd49aca44342a5cfe34d9cf62c20f3c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds SCE module info This function locates the strings table and finds the section where the module information resides. Then it reads the module information. This function will move the pointer in the file descriptor.  <a href="#afd49aca44342a5cfe34d9cf62c20f3c0"></a><br/></td></tr>
<tr class="separator:afd49aca44342a5cfe34d9cf62c20f3c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to load executable </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="addf0f835f4f422e854fa4c6eb7e657c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvl_check_elf_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_elf32___ehdr.html">Elf32_Ehdr_t</a> *&#160;</td>
          <td class="paramname"><em>hdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validates ELF header Makes sure the ELF is recognized by the Vita's architecture. </p>
<dl class="section return"><dt>Returns</dt><dd>Zero if valid, otherwise invalid </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdr</td><td>ELF header to check </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afd49aca44342a5cfe34d9cf62c20f3c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvl_get_module_info </td>
          <td>(</td>
          <td class="paramtype">SceUID&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SceOff&#160;</td>
          <td class="paramname"><em>start_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_elf32___ehdr.html">Elf32_Ehdr_t</a> *&#160;</td>
          <td class="paramname"><em>elf_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmodule__info.html">module_info_t</a> *&#160;</td>
          <td class="paramname"><em>mod_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds SCE module info This function locates the strings table and finds the section where the module information resides. Then it reads the module information. This function will move the pointer in the file descriptor. </p>
<dl class="section return"><dt>Returns</dt><dd>Zero on success, otherwise error </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File descriptor for the ELF </td></tr>
    <tr><td class="paramname">start_offset</td><td>Starting position of the ELF in file </td></tr>
    <tr><td class="paramname">elf_hdr</td><td>ELF header </td></tr>
    <tr><td class="paramname">mod_info</td><td>Where to read information to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2984987adfb0eba822616e72620a6dfa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvl_load_elf </td>
          <td>(</td>
          <td class="paramtype">SceUID&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SceOff&#160;</td>
          <td class="paramname"><em>start_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads an ELF file Performs both loading and resolving NIDs. </p>
<dl class="section return"><dt>Returns</dt><dd>Zero on success, otherwise error </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File descriptor for ELF </td></tr>
    <tr><td class="paramname">start_offset</td><td>Starting position of the ELF in file </td></tr>
    <tr><td class="paramname">entry</td><td>Returned pointer to entry pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af42fa9af8c0050f5f2998dcec67f219c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvl_load_exe </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads an supported executable This function identifies and loads a executable at the given file. Currently supports ELF and SCE executable. </p>
<dl class="section return"><dt>Returns</dt><dd>Zero on success, otherwise error </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Absolute path to executable </td></tr>
    <tr><td class="paramname">entry</td><td>Returned pointer to entry pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adfa62679dbbd82a847b188f76745e49f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uvl_load_module </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a system module by name. </p>
<dl class="section return"><dt>Returns</dt><dd>Zero on success, otherwise error </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of module to load </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 29 2012 22:21:33 for UVLoader by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
